<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spritesheet Animation</title>
  <style>
    canvas {
      border: 1px solid black;
      display: block;
      margin: 20px 0;
    }
    input {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h2>Spritesheet Animation</h2>
  <input type="file" id="spritesheetInput" accept="image/*">
  <br>
  <label for="frameWidthRange">Breite eines Frames:</label>
  <input type="range" id="frameWidthRange" min="1" max="500" value="100">
  <span id="frameWidthDisplay">100</span>px
  <br>
  <canvas id="animationCanvas" width="500" height="300"></canvas>

  <script>
    const fileInput = document.getElementById('spritesheetInput');
    const frameWidthRange = document.getElementById('frameWidthRange');
    const frameWidthDisplay = document.getElementById('frameWidthDisplay');
    const canvas = document.getElementById('animationCanvas');
    const ctx = canvas.getContext('2d');
    
    let spritesheet = null;
    let frameWidth = parseInt(frameWidthRange.value);
    let currentFrame = 0;
    let numberOfFrames = 1;

    // Event listener to update the frame width from the range input
    frameWidthRange.addEventListener('input', (e) => {
      frameWidth = parseInt(e.target.value);
      frameWidthDisplay.textContent = frameWidth;
      if (spritesheet) {
        numberOfFrames = Math.floor(spritesheet.width / frameWidth);
      }
    });

    // Load the spritesheet when a file is selected
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const img = new Image();
        img.src = URL.createObjectURL(file);
        img.onload = () => {
          spritesheet = img;
          numberOfFrames = Math.floor(spritesheet.width / frameWidth);
          animate();
        };
      }
    });

    // Animation loop
    function animate() {
      if (spritesheet) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(
          spritesheet,
          currentFrame * frameWidth, // x position in spritesheet
          0, // y position in spritesheet
          frameWidth, // width of one frame
          spritesheet.height, // height of the spritesheet
          0, // x position on canvas
          0, // y position on canvas
          frameWidth, // draw width on canvas
          spritesheet.height // draw height on canvas
        );
        currentFrame = (currentFrame + 1) % numberOfFrames;
      }
      requestAnimationFrame(animate);
    }
  </script>
</body>
</html>
